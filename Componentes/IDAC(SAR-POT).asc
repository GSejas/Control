Version 4
SHEET 1 1508 3024
WIRE 336 -144 448 -176
WIRE 336 -144 240 -144
WIRE 432 -144 336 -144
WIRE 240 -96 240 -144
WIRE 336 -96 336 -144
WIRE -176 -80 -176 -96
WIRE -96 -80 -176 -80
WIRE 64 -80 64 -96
WIRE 64 -80 -16 -80
WIRE 80 -80 64 -80
WIRE 64 -64 64 -80
WIRE 432 -64 432 -144
WIRE -176 -48 -176 -80
WIRE -176 -48 -352 -48
WIRE 64 -48 64 -64
WIRE 96 -48 64 -48
WIRE -352 -32 -352 -48
WIRE 448 0 432 0
WIRE -352 16 -352 -32
WIRE 336 32 336 -16
WIRE 400 32 336 32
WIRE 432 32 432 0
WIRE 432 32 400 32
WIRE 400 64 400 32
WIRE 240 96 240 48
WIRE -48 112 -48 80
WIRE -352 128 -352 96
WIRE -352 128 -368 128
WIRE -368 144 -368 128
WIRE 400 160 400 144
FLAG -368 144 0
FLAG 240 96 0
FLAG 400 160 0
FLAG -352 -32 Vpwm
FLAG 64 -64 Vbase
FLAG 448 -176 Vsol
FLAG -48 112 0
SYMBOL diode 416 -64 R0
SYMATTR InstName D1
SYMATTR Value BA157GP
SYMBOL voltage 400 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL Darlington\\TIP120 112 -96 R0
SYMATTR InstName U1
SYMBOL ind 320 -112 R0
SYMATTR InstName L1
SYMATTR Value 15mA
SYMATTR SpiceLine Rser=3
SYMBOL current -352 96 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 1m
SYMBOL res 0 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
TEXT -696 -424 Left 2 !.MODEL BA157GP D\n+   IS =  1.366e-08  \n+   RS =  0.09599  \n+   CJO =  3.067e-11  \n+   VJ =  0.3905  \n+   TT =  3.699e-07  \n+   M =  0.3408  \n+   BV =  100  \n+   N =  2  \n+   EG =  1.11  \n+   XTI =  3  \n+   KF =  0  \n+   AF =  1  \n+   FC =  0.5  \n+   IBV =  0.0001  \n+   TNOM =  27
TEXT -696 216 Left 2 !;tran 0 19.5ms 19m 1m
TEXT 288 -224 Left 2 !.include LM124.txt
TEXT -32 272 Left 2 !.include opamp.lib.txt
TEXT -192 -368 Left 2 !.dc I1 0 255u 1u
